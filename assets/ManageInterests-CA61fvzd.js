import{i as I,j as t,n as R,r as m,o as z,l as y,p as h,B as g,Y as L,P as q,Z as U,$ as W,a0 as O,a1 as o,a2 as H,I as k,a3 as F,a4 as G,a5 as V,G as d,z as v,a6 as P}from"./vendor-BEV2JtpX.js";import{b as Y,s as l}from"./index-CWCCNURT.js";import{I as Z,M as $}from"./MarkdownEditor-BzJKTVWG.js";import"./supabase-BTz4VuFi.js";import"./Delete-BxS1TgHm.js";const K=I(t.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutlineOutlined"),Q=I(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined"),X=I(t.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");function se(){const{user:a}=Y(),b=R(),[w,C]=m.useState([]),[_,S]=m.useState(!1),[p,u]=m.useState(null),[s,c]=m.useState({title:"",description:"",image_path:"",content:"",name:""});m.useEffect(()=>{if(!a||a.email!=="golfergeek@gmail.com"){b("/");return}(async()=>{try{const{data:n}=await l.storage.listBuckets();if(!n.some(r=>r.name==="interest-images")){const{error:r}=await l.storage.createBucket("interest-images",{public:!0,allowedMimeTypes:["image/*"],fileSizeLimit:5242880});r&&console.error("Error creating bucket:",r)}}catch(n){console.error("Error in setupStorage:",n)}})(),x()},[a,b]);const x=async()=>{try{const{data:e,error:n}=await l.from("interests").select("*").eq("user_id",a.id).order("title");if(n)throw n;C(e)}catch(e){console.error("Error fetching interests:",e)}},E=(e=null)=>{e?(u(e),c({title:e.title,description:typeof e.description=="object"?JSON.stringify(e.description,null,2):e.description||"",image_path:e.image_path||"",content:e.content||"",name:e.name||""})):(u(null),c({title:"",description:"",image_path:"",content:"",name:""})),S(!0)},f=()=>{S(!1),u(null),c({title:"",description:"",image_path:"",content:"",name:""})},j=e=>{const{name:n,value:i}=e.target;c(r=>({...r,[n]:i}))},D=e=>n=>{c(i=>({...i,[e]:n||""}))},T=e=>{e&&e.length>0&&c(n=>({...n,image_path:e[0]}))},A=()=>{c(e=>({...e,image_path:""}))},M=async()=>{try{const e={...s,description:s.description,name:s.name||s.title.toLowerCase().replace(/[^a-z0-9]+/g,"-"),user_id:a.id};if(p){const{error:n}=await l.from("interests").update(e).eq("id",p.id);if(n)throw n}else{const n=crypto.randomUUID(),{error:i}=await l.from("interests").insert([{...e,id:n,arcid:n}]);if(i)throw i}f(),x()}catch(e){console.error("Error saving interest:",e)}},B=async e=>{if(a!=null&&a.id)try{const{data:n,error:i}=await l.from("interests").select("*").eq("id",e).single();if(i)throw i;const{error:r}=await l.from("interests").delete().eq("id",e);if(r)throw r;C(w.filter(N=>N.id!==e))}catch{setError("Failed to delete interest")}},J=async()=>{const e=[{title:"Coding Journey",description:JSON.stringify({sections:[{title:"Near the metal",items:["Assembler","C++"]},{title:"Business Developer",items:["Power Builder","VB","C#",".NET","SS(RAI)S","Angular"]},{title:"Semi-Retirement",items:["React","AI","Mentoring"]}]}),image_path:"/images/default.jpg",name:"coding",sequence:1,content:`# Coding Journey

From assembly language to modern web development, my journey in software development spans decades of technological evolution.`},{title:"Golf Adventures",description:JSON.stringify({text:"Sharing golf experiences, tips, and achievements"}),image_path:"/images/default.jpg",name:"golf",sequence:2,content:`# Golf Adventures

Exploring the game of golf, sharing experiences, and documenting the journey of improvement.`},{title:"Mentorship",description:JSON.stringify({text:"Guiding and supporting others in their journey"}),image_path:"/images/default.jpg",name:"mentoring",sequence:3,content:`# Mentorship

Sharing knowledge and experience to help others grow in their careers and personal development.`},{title:"Life's Journey",description:JSON.stringify({text:"Insights and reflections on the aging process"}),image_path:"/images/default.jpg",name:"aging",sequence:4,content:`# Life's Journey

Reflections on aging, personal growth, and the continuous process of learning and adaptation.`}];for(const n of e)try{const i=crypto.randomUUID(),{error:r}=await l.from("interests").insert([{...n,id:i,arcid:i,user_id:a.id}]);if(r)throw r}catch(i){console.error("Error creating interest:",i)}x()};return t.jsxs(z,{maxWidth:"lg",sx:{mt:4},children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(h,{variant:"h4",component:"h1",children:"Manage Interests"}),t.jsxs(y,{sx:{display:"flex",gap:2},children:[t.jsx(g,{variant:"outlined",color:"primary",onClick:J,children:"Create Initial Interests"}),t.jsx(g,{variant:"contained",color:"primary",startIcon:t.jsx(K,{}),onClick:()=>E(),children:"Add Interest"})]})]}),t.jsx(L,{component:q,children:t.jsxs(U,{children:[t.jsx(W,{children:t.jsxs(O,{children:[t.jsx(o,{children:"Title"}),t.jsx(o,{children:"Description"}),t.jsx(o,{children:"Image"}),t.jsx(o,{children:"Actions"})]})}),t.jsx(H,{children:w.map(e=>t.jsxs(O,{children:[t.jsx(o,{children:e.title}),t.jsx(o,{children:t.jsxs(h,{noWrap:!0,sx:{maxWidth:200},children:[typeof e.description=="object"?JSON.stringify(e.description).substring(0,100):(e.description||"").substring(0,100),(typeof e.description=="object"?JSON.stringify(e.description).length>100:(e.description||"").length>100)?"...":""]})}),t.jsx(o,{children:e.image_path&&t.jsx(y,{component:"img",src:e.image_path,alt:e.title,sx:{width:50,height:50,objectFit:"cover",borderRadius:1}})}),t.jsxs(o,{children:[t.jsx(k,{onClick:()=>E(e),color:"primary",children:t.jsx(X,{})}),t.jsx(k,{onClick:()=>B(e.id),color:"error",children:t.jsx(Q,{})})]})]},e.id))})]})}),t.jsxs(F,{open:_,onClose:f,maxWidth:"md",fullWidth:!0,children:[t.jsx(G,{children:p?"Edit Interest":"Add Interest"}),t.jsx(V,{children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,children:t.jsx(v,{name:"title",label:"Title",value:s.title,onChange:j,fullWidth:!0,margin:"normal"})}),t.jsx(d,{item:!0,xs:12,children:t.jsx(v,{name:"name",label:"URL Name (optional)",value:s.name,onChange:j,fullWidth:!0,margin:"normal",helperText:"Leave blank to auto-generate from title"})}),t.jsx(d,{item:!0,xs:12,children:t.jsx(v,{name:"description",label:"Description",value:s.description,onChange:j,fullWidth:!0,multiline:!0,rows:3,margin:"normal"})}),t.jsxs(d,{item:!0,xs:12,children:[t.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Interest Image"}),t.jsx(Z,{onUpload:T,onRemove:A,existingImages:s.image_path?[s.image_path]:[],bucket:"interest-images",folder:"interest-images"})]}),t.jsxs(d,{item:!0,xs:12,children:[t.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Content"}),t.jsx($,{value:s.content,onChange:D("content")})]})]})}),t.jsxs(P,{children:[t.jsx(g,{onClick:f,children:"Cancel"}),t.jsx(g,{onClick:M,variant:"contained",color:"primary",children:"Save"})]})]})]})}export{se as default};
//# sourceMappingURL=ManageInterests-CA61fvzd.js.map
