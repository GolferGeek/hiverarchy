import{n as L,e as E,r,j as e,o as I,l as s,P,p,y as C,z as h,B,D,L as W,E as k,v as z}from"./vendor-BEV2JtpX.js";import{b as A,a as F}from"./index-CWCCNURT.js";import"./supabase-BTz4VuFi.js";function N(){const i=L();E();const{signIn:f}=A(),{fetchProfiles:j,userProfile:n}=F(),[o,v]=r.useState(""),[l,w]=r.useState(""),[u,c]=r.useState(""),[m,d]=r.useState(!1),[y,g]=r.useState(!1);async function S(t){t.preventDefault();try{c(""),d(!0),g(!0);const{error:a}=await f({email:o,password:l});if(a)throw a;await j();let x=0;for(;!n&&x<20;)await new Promise(b=>setTimeout(b,100)),x++;n!=null&&n.username?i(`/${n.username}`):i("/manage/profile")}catch(a){console.error("Login error:",a),c("Failed to sign in: "+a.message),g(!1)}finally{d(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx(I,{maxWidth:"sm",children:e.jsx(s,{sx:{mt:8},children:e.jsxs(P,{sx:{p:4},children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Login"}),u&&e.jsx(C,{severity:"error",sx:{mb:2},children:u}),e.jsxs(s,{component:"form",onSubmit:S,children:[e.jsx(h,{fullWidth:!0,label:"Email",type:"email",value:o,onChange:t=>v(t.target.value),margin:"normal",required:!0,autoComplete:"email"}),e.jsx(h,{fullWidth:!0,label:"Password",type:"password",value:l,onChange:t=>w(t.target.value),margin:"normal",required:!0,autoComplete:"current-password"}),e.jsx(B,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:m,children:m?"Signing in...":"Sign In"}),e.jsx(s,{sx:{textAlign:"center"},children:e.jsx(D,{component:W,to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})})}),e.jsxs(k,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1,display:"flex",flexDirection:"column",gap:2},open:y,children:[e.jsx(z,{color:"inherit"}),e.jsx(p,{variant:"h6",children:"Signing in..."})]})]})}export{N as default};
//# sourceMappingURL=Login-DGJ8ju4e.js.map
